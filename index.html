<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pain Points Todo List</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
      font-size: 16px;
    }
    .todo-container {
      max-width: 100%;
      padding: 15px;
    }
    .todo-item {
      padding: 10px;
      border-bottom: 1px solid #dee2e6;
    }
    .task-text {
      font-size: 1rem;
      margin-bottom: 8px;
      text-align: center;
    }
    .task-text.editing {
      display: none;
    }
    .task-input {
      display: none;
      width: 100%;
      margin-bottom: 8px;
      text-align: center;
    }
    .task-input.editing {
      display: block;
    }
    .color-square {
      width: 100%;
      height: 40px;
      border: 1px solid #000;
      cursor: pointer;
      margin-bottom: 8px;
    }
    .btn-up {
      width: 100%;
      font-size: 0.9rem;
      padding: 8px;
    }
    .input-group {
      margin-bottom: 15px;
    }
    @media (max-width: 576px) {
      .todo-item {
        padding: 8px;
      }
      .task-text, .task-input {
        font-size: 0.9rem;
      }
      .color-square {
        height: 35px;
      }
      .btn-up {
        font-size: 0.8rem;
        padding: 6px;
      }
    }
  </style>
</head>
<body>
  <div class="container todo-container">
    <h1 class="text-center mb-4">Pain Points</h1>
    <div class="input-group mb-3">
      <input type="text" class="form-control" id="new-task" placeholder="Add a new pain point">
      <button class="btn btn-primary" id="add-task">+</button>
    </div>
    <div id="todo-list"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const todoList = document.getElementById('todo-list');
    const newTaskInput = document.getElementById('new-task');
    const addTaskButton = document.getElementById('add-task');

    // Load tasks from local storage
    let tasks = JSON.parse(localStorage.getItem('painPoints')) || [];

    // Render tasks
    function renderTasks() {
      todoList.innerHTML = '';
      tasks.forEach((task, index) => {
        const div = document.createElement('div');
        div.className = 'todo-item';
        div.innerHTML = `
          <span class="task-text">${task.text}</span>
          <input type="text" class="task-input form-control" value="${task.text}">
          <div class="color-square" style="background-color: ${task.color}" data-index="${index}"></div>
          <button class="btn btn-outline-secondary btn-up" data-index="${index}">Up</button>
        `;
        todoList.appendChild(div);
      });
      attachEventListeners();
      saveTasks();
    }

    // Save tasks to local storage
    function saveTasks() {
      localStorage.setItem('painPoints', JSON.stringify(tasks));
    }

    // Add new task
    addTaskButton.addEventListener('click', () => {
      const text = newTaskInput.value.trim();
      if (text) {
        tasks.push({ text, color: 'lightcoral' });
        newTaskInput.value = '';
        renderTasks();
      }
    });

    // Handle Enter key to add task
    newTaskInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        addTaskButton.click();
      }
    });

    // Attach event listeners to squares, text, and up buttons
    function attachEventListeners() {
      // Color square click
      document.querySelectorAll('.color-square').forEach(square => {
        square.addEventListener('click', () => {
          const index = square.dataset.index;
          const colors = ['lightcoral', 'lightsalmon', 'lightgreen'];
          const currentColor = tasks[index].color;
          const nextColor = colors[(colors.indexOf(currentColor) + 1) % 3];
          tasks[index].color = nextColor;
          renderTasks();
        });
      });

      // Task text click to edit
      document.querySelectorAll('.task-text').forEach(text => {
        text.addEventListener('click', () => {
          const parent = text.parentElement;
          parent.querySelector('.task-text').classList.add('editing');
          parent.querySelector('.task-input').classList.add('editing');
          parent.querySelector('.task-input').focus();
        });
      });

      // Task input blur or enter to save
      document.querySelectorAll('.task-input').forEach(input => {
        input.addEventListener('blur', () => {
          const index = input.parentElement.querySelector('.color-square').dataset.index;
          tasks[index].text = input.value.trim();
          renderTasks();
        });
        input.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            input.blur();
          }
        });
      });

      // Up button click
      document.querySelectorAll('.btn-up').forEach(button => {
        button.addEventListener('click', () => {
          const index = parseInt(button.dataset.index);
          if (index > 0) {
            [tasks[index], tasks[index - 1]] = [tasks[index - 1], tasks[index]];
            renderTasks();
          }
        });
      });
    }

    // Initial render
    renderTasks();
  </script>
</body>
</html>
